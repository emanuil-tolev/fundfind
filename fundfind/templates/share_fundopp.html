{% extends "base.html" %}

{% block content %}

<form action="/share_fundopp" method="POST" enctype="multipart/form-data" id="share_fundopp_form" class="form-horizontal wholepage">
    <fieldset>

        <h2>Share a funding opportunity</h2>

        <p class="help-block">... with the world!</p>
        <p class="help-block">All contibutions are licensed under the <a href="http://creativecommons.org/licenses/by/3.0/" target="_blank">Creative Commons Attribution License v.3.0 Unported</a>.</p>

        <div class="row-fluid horizontal-element">
            <div class="control-group">
                <label class="control-label" for="title">Title</label>
                <div class="controls">
                    <input class="span6" type="text" name="title" value="{{ o['title'] }}" />
                </div>
            </div>
        </div>

        <div class="row-fluid horizontal-element">
            <div class="control-group">
                <label class="control-label" for="name">URL</label>
                <div class="controls">
                    <input class="span6" type="text" name="url" value="{{ o['url'] }}"/>
                </div> 
            </div>
        </div>

        <div class="row-fluid horizontal-element">
            <div class="control-group">
                <label class="control-label" for="name">Funder</label>
                <div class="controls">
                    <input class="span4" type="text" name="funder" value="{{ o['funder'] }}"/>
                    <!-- <div class="dropdown" id="funders-dropdown" data-dropdown="dropdown">
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="#">EPSRC</a></li>
                            <li><a href="#">BBSRC</a></li>
                            <li><a href="#">Wellcome Trust</a></li>
                            <li class="divider"></li>
                            <li><a href="#">New Funder</a></li>
                        </ul> 
                    </div>-->
                    <!-- <div class="row-fluid">
                        <div class="help-block span6">


                        </div>
                    </div> -->
                </div>
            </div>
        </div>

        <div class="row-fluid horizontal-element">
            <div class="span3">
                <div class="control-group">
                    <label class="control-label" for="closing_date">Closing date</label>
                    <div class="controls">
                        <input class="span3" type="text" name="closing_date" value="{{ o['closing_date'] }}" />
                    </div>
                </div>
            </div>
            <div class="span6">
                <p class="controls help-block">
                Date in YYYY-MM-DD format.<br>
                Closing <em>time</em> can be included if available. (Any <a href="http://en.wikipedia.org/wiki/ISO_8601#Combined_date_and_time_representations" target="_blank">ISO format</a> date (+time) is OK.)
                </p>
            </div>
        </div>


        <div class="row-fluid horizontal-element">
            <div class="span3">
                <div class="control-group">
                    <label class="control-label" for="issue_date">Issue date</label>
                    <div class="controls">
                        <input class="span3" type="text" name="issue_date" value="{{ o['issue_date'] }}" />
                    </div>
                </div>
            </div>
            <div class="span9">
                <p class="controls help-block">
                When was this funding opportunity published? (Or when was this call issued?)<br>
                Date in YYYY-MM-DD format. (Any <a href="http://en.wikipedia.org/wiki/ISO_8601#Combined_date_and_time_representations" target="_blank">ISO format</a> date (+time) is OK.)
                </p>
            </div>
        </div>


        <div class="row-fluid horizontal-element">
            <div class="control-group">
                <label class="control-label" for="funds">Funds available</label>
                <div class="controls controls-row">
                    <label class="radio inline">
                        <input type="radio" name="funds_exactly_or_upto" value="exactly" {% if o['funds_exactly_or_upto'] == 'exactly' %}test="test" checked="checked"{% endif %} />
                        &nbsp;exactly
                    </label>

                    <label class="radio inline">
                        <input type="radio" name="funds_exactly_or_upto" value="upto" {% if o['funds_exactly_or_upto'] == 'upto' %}checked="checked"{% endif %} />
                        &nbsp;up to
                    </label>

                    <label class="radio inline">
                        <div class="input-prepend">
                            <span class="add-on">&pound;</span>
                            <input class="span3" name="funds" type="text" value="{{ o['funds'] }}"/>
                        </div>
                    </label>
                </div>		

                <div>
                    <p class="controls help-block">
                    How much money is available (or might be available) through this funding opportunity.
                    </p>
                </div>
            </div>
        </div>

        <div class="row-fluid horizontal-element">
            <div class="span7 control-group">
                <label class="control-label" for="more_info">Additional information</label>
                <div class="controls">
                    <textarea class="span6 medium" name="more_info">{{ o['description'] }}</textarea>
                </div>
            </div>
            <div class="span5">
                <p class=" help-block">
                E.g.: how does the funder treat this funding opportunity? How do they classify the opportunity? How important is it to them / how does it fit in with their general strategy? Does it require security clearance?
                </p>
            </div>
        </div>

        <div class="row-fluid horizontal-element">
            <div class="span7 control-group">
                <label class="control-label" for="useful_links[]">Useful links</label>
                <div class="controls">
                    <div id="useful_links_group" class="input-grp-for-addmore">
                        {% if not o['useful_links'] %}
                        <span class="useful-link input-for-addmore"><input class="span5" type="text" name="useful_links[]"/></span>
                        {% else %}
                        {% for link in o['useful_links'] %}
                        <span class="useful-link input-for-addmore"><input class="span5" type="text" name="useful_links[]" value="{{ link }}"/></span>
                        {% endfor %}
                        {% endif%}
                    </div>
                    <a id="more_links" class="btn add-more-btn" href="">add more</a>
                </div>
            </div>
            <div class="span5">
                <p class="help-block">
                Any additional useful links related to to this funding opportunity. Can be useful pages on their own website as well. If they describe general policies or requirements related to all opportunities by this funder, it is best add them to the funder's Useful Links section.
                <!-- TODO: generate URL based on choice of funder above -->

                </p>
            </div>
        </div>


        <div class="row-fluid horizontal-element">
            <div class="control-group span5" id="tags_container">
                <label class="control-label" for="tags">Tags</label>
                <div class="controls">
                    <input class="span3" type="text" name="tags" id="tags" value="{{ o['tags']|join(', ') }}"/> 
                    <a id="more_tags" class="btn" href="">add more</a>
                </div>
            </div>
            <div class="span4">
                <p class="help-block" id="tags_description">
                Any tag words (keywords) that describe this funding opportunity. Separated by commas.
                </p>

            </div>
        </div>

        <!--

        <label for="of_interest_to">Of interest to</label>
        <div class="controls">
            <input class="span2" type="text" name="of_interest_to" id="of_interest_to" value="{{ o['of_interest_to']|join(', ') }}"/> 
            <a id="more_of_interest_to" class="btn" href="">add more</a>
            <div class="row-fluid">
                <div class="help-block span6">
                    List countries, organisations, departments or research groups which might be interested in this funding opportunity. Separated by commas.

                </div>
            </div>
        </div>
        -->


        <div class="controls">
            <input class="btn primary span2" type="submit" name="submit" value="Save" />
        </div>

        {% if o['id'] %}<input type="hidden" name="id" value="{{ o['id'] }}" />{% endif %}
    </fieldset>
</form>
{% endblock %}

{% block js_bottom -%}
{{super()}}
<script type="text/javascript">
    add_more_expand_field('tags');
    add_more_expand_field('of_interest_to');
</script>
{%- endblock js_bottom %}
